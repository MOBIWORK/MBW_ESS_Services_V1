import{q as v,x as u,as as p,C as w,ad as T,o as y,b,j as t,w as n,y as a,B as d,a as g,af as E,E as x,D as N,M as V,h as k}from"./index-aea319af.js";import{c as C}from"./notification-c4068361.js";import{u as h}from"./error-bdedfa48.js";import{_ as B}from"./PageTitle.vue_vue_type_script_setup_true_lang-98ef5881.js";import{_ as D}from"./plus-d3fdba1e.js";import{_ as M}from"./LV.vue_vue_type_script_setup_true_lang-2ffe76d5.js";import"./iconify-d47d89f2.js";import"./EmptyMessage.vue_vue_type_script_setup_true_lang-fbb9efd4.js";import"./label-bdf4c41a.js";import"./use-tree-walker-388abf0b.js";import"./use-controllable-f6b0426f.js";const A={class:"flex flex-col"},z=v({__name:"TeamList",setup(L){const c=V(),l=u(!1),o=u(null),f=[{label:"Name",key:"name",width:"w-80"},{label:"Assignment rule",key:"assignment_rule",width:"w-80"}],_=C({doctype:"HD Team",fields:["name","assignment_rule"],auto:!0,transform:r=>{for(const e of r)e.onClick={name:p,params:{teamId:e.name}};return r}}),m=w({url:"frappe.client.insert",makeParams(){return{doc:{doctype:"HD Team",team_name:o.value}}},validate(r){if(d.isEmpty(r.doc.team_name))return"Title is required"},auto:!1,onSuccess(){c.replace({name:p,params:{teamId:o.value}})},onError:h({title:"Error creating team"})});return T(()=>({title:"Teams"})),(r,e)=>{const i=k("Button");return y(),b("div",A,[t(B,{title:"Teams"},{right:n(()=>[t(i,{label:"New team",theme:"gray",variant:"solid",onClick:e[0]||(e[0]=s=>l.value=!l.value)},{prefix:n(()=>[t(a(D),{class:"h-4 w-4"})]),_:1})]),_:1}),t(a(M),{columns:f,resource:a(_),class:"mt-2.5",doctype:"HD Team"},null,8,["resource"]),t(a(N),{modelValue:l.value,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value=s),options:{title:"New team"}},{"body-content":n(()=>[g("form",{class:"space-y-2",onSubmit:e[2]||(e[2]=x((...s)=>a(m).submit&&a(m).submit(...s),["prevent"]))},[t(a(E),{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s),label:"Title",placeholder:"Product experts",type:"text"},null,8,["modelValue"]),t(i,{disabled:a(d.isEmpty)(o.value),class:"w-full",label:"Create",theme:"gray",variant:"solid"},null,8,["disabled"])],32)]),_:1},8,["modelValue"])])}}});export{z as default};
