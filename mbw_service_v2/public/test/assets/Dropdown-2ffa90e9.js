import{x,aC as h,q as F,aK as G,A as M,aL as J,aM as X,az as Y,aF as Z,aE as ee,aG as R,aN as T,aO as E,aT as te,aU as O,s as ne,aP as ae,a7 as oe,aa as S,ab as re,aX as b,bl as le,aW as $,bm as H,a_ as ue,_ as se,i as ie,aq as ce,P as de,o as I,c as w,w as k,j as A,r as pe,n as me,a0 as N,l as ve,t as B,f as L,b as P,d as j,p as K,F as V,H as q,a as fe,h as _}from"./index-aea319af.js";import{b as ge,u as be,x as he,a as y}from"./use-tracked-pointer-f136af1c.js";import{p as ye}from"./use-tree-walker-388abf0b.js";let z=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function U(t){var o,r;let p=(o=t.innerText)!=null?o:"",e=t.cloneNode(!0);if(!(e instanceof HTMLElement))return p;let l=!1;for(let f of e.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))f.remove(),l=!0;let u=l?(r=e.innerText)!=null?r:"":p;return z.test(u)&&(u=u.replace(z,"")),u}function Ie(t){let o=t.getAttribute("aria-label");if(typeof o=="string")return o.trim();let r=t.getAttribute("aria-labelledby");if(r){let p=r.split(" ").map(e=>{let l=document.getElementById(e);if(l){let u=l.getAttribute("aria-label");return typeof u=="string"?u.trim():U(l).trim()}return null}).filter(Boolean);if(p.length>0)return p.join(", ")}return U(t).trim()}function xe(t){let o=x(""),r=x("");return()=>{let p=h(t);if(!p)return"";let e=p.innerText;if(o.value===e)return r.value;let l=Ie(p).trim().toLowerCase();return o.value=e,r.value=l,l}}var Me=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Me||{}),ke=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(ke||{});function _e(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let Q=Symbol("MenuContext");function C(t){let o=re(Q,null);if(o===null){let r=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,C),r}return o}let we=F({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:o,attrs:r}){let p=x(1),e=x(null),l=x(null),u=x([]),f=x(""),m=x(null),d=x(1);function n(i=c=>c){let c=m.value!==null?u.value[m.value]:null,s=ue(i(u.value.slice()),g=>h(g.dataRef.domRef)),a=c?s.indexOf(c):null;return a===-1&&(a=null),{items:s,activeItemIndex:a}}let v={menuState:p,buttonRef:e,itemsRef:l,items:u,searchQuery:f,activeItemIndex:m,activationTrigger:d,closeMenu:()=>{p.value=1,m.value=null},openMenu:()=>p.value=0,goToItem(i,c,s){let a=n(),g=he(i===y.Specific?{focus:y.Specific,id:c}:{focus:i},{resolveItems:()=>a.items,resolveActiveIndex:()=>a.activeItemIndex,resolveId:D=>D.id,resolveDisabled:D=>D.dataRef.disabled});f.value="",m.value=g,d.value=s??1,u.value=a.items},search(i){let c=f.value!==""?0:1;f.value+=i.toLowerCase();let s=(m.value!==null?u.value.slice(m.value+c).concat(u.value.slice(0,m.value+c)):u.value).find(g=>g.dataRef.textValue.startsWith(f.value)&&!g.dataRef.disabled),a=s?u.value.indexOf(s):-1;a===-1||a===m.value||(m.value=a,d.value=1)},clearSearch(){f.value=""},registerItem(i,c){let s=n(a=>[...a,{id:i,dataRef:c}]);u.value=s.items,m.value=s.activeItemIndex,d.value=1},unregisterItem(i){let c=n(s=>{let a=s.findIndex(g=>g.id===i);return a!==-1&&s.splice(a,1),s});u.value=c.items,m.value=c.activeItemIndex,d.value=1}};return G([e,l],(i,c)=>{var s;v.closeMenu(),J(c,X.Loose)||(i.preventDefault(),(s=h(e))==null||s.focus())},M(()=>p.value===0)),Y(Q,v),Z(M(()=>ee(p.value,{[0]:R.Open,[1]:R.Closed}))),()=>{let i={open:p.value===0,close:v.closeMenu};return T({ourProps:{},theirProps:t,slot:i,slots:o,attrs:r,name:"Menu"})}}}),Se=F({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${E()}`}},setup(t,{attrs:o,slots:r,expose:p}){let e=C("MenuButton");p({el:e.buttonRef,$el:e.buttonRef});function l(d){switch(d.key){case b.Space:case b.Enter:case b.ArrowDown:d.preventDefault(),d.stopPropagation(),e.openMenu(),S(()=>{var n;(n=h(e.itemsRef))==null||n.focus({preventScroll:!0}),e.goToItem(y.First)});break;case b.ArrowUp:d.preventDefault(),d.stopPropagation(),e.openMenu(),S(()=>{var n;(n=h(e.itemsRef))==null||n.focus({preventScroll:!0}),e.goToItem(y.Last)});break}}function u(d){switch(d.key){case b.Space:d.preventDefault();break}}function f(d){t.disabled||(e.menuState.value===0?(e.closeMenu(),S(()=>{var n;return(n=h(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})})):(d.preventDefault(),e.openMenu(),_e(()=>{var n;return(n=h(e.itemsRef))==null?void 0:n.focus({preventScroll:!0})})))}let m=ge(M(()=>({as:t.as,type:o.type})),e.buttonRef);return()=>{var d;let n={open:e.menuState.value===0},{id:v,...i}=t,c={ref:e.buttonRef,id:v,type:m.value,"aria-haspopup":"menu","aria-controls":(d=h(e.itemsRef))==null?void 0:d.id,"aria-expanded":t.disabled?void 0:e.menuState.value===0,onKeydown:l,onKeyup:u,onClick:f};return T({ourProps:c,theirProps:i,slot:n,attrs:o,slots:r,name:"MenuButton"})}}}),De=F({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${E()}`}},setup(t,{attrs:o,slots:r,expose:p}){let e=C("MenuItems"),l=x(null);p({el:e.itemsRef,$el:e.itemsRef}),ye({container:M(()=>h(e.itemsRef)),enabled:M(()=>e.menuState.value===0),accept(n){return n.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:n.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(n){n.setAttribute("role","none")}});function u(n){var v;switch(l.value&&clearTimeout(l.value),n.key){case b.Space:if(e.searchQuery.value!=="")return n.preventDefault(),n.stopPropagation(),e.search(n.key);case b.Enter:if(n.preventDefault(),n.stopPropagation(),e.activeItemIndex.value!==null){let i=e.items.value[e.activeItemIndex.value];(v=h(i.dataRef.domRef))==null||v.click()}e.closeMenu(),H(h(e.buttonRef));break;case b.ArrowDown:return n.preventDefault(),n.stopPropagation(),e.goToItem(y.Next);case b.ArrowUp:return n.preventDefault(),n.stopPropagation(),e.goToItem(y.Previous);case b.Home:case b.PageUp:return n.preventDefault(),n.stopPropagation(),e.goToItem(y.First);case b.End:case b.PageDown:return n.preventDefault(),n.stopPropagation(),e.goToItem(y.Last);case b.Escape:n.preventDefault(),n.stopPropagation(),e.closeMenu(),S(()=>{var i;return(i=h(e.buttonRef))==null?void 0:i.focus({preventScroll:!0})});break;case b.Tab:n.preventDefault(),n.stopPropagation(),e.closeMenu(),S(()=>le(h(e.buttonRef),n.shiftKey?$.Previous:$.Next));break;default:n.key.length===1&&(e.search(n.key),l.value=setTimeout(()=>e.clearSearch(),350));break}}function f(n){switch(n.key){case b.Space:n.preventDefault();break}}let m=te(),d=M(()=>m!==null?(m.value&R.Open)===R.Open:e.menuState.value===0);return()=>{var n,v;let i={open:e.menuState.value===0},{id:c,...s}=t,a={"aria-activedescendant":e.activeItemIndex.value===null||(n=e.items.value[e.activeItemIndex.value])==null?void 0:n.id,"aria-labelledby":(v=h(e.buttonRef))==null?void 0:v.id,id:c,onKeydown:u,onKeyup:f,role:"menu",tabIndex:0,ref:e.itemsRef};return T({ourProps:a,theirProps:s,slot:i,attrs:o,slots:r,features:O.RenderStrategy|O.Static,visible:d.value,name:"MenuItems"})}}}),Pe=F({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${E()}`}},setup(t,{slots:o,attrs:r,expose:p}){let e=C("MenuItem"),l=x(null);p({el:l,$el:l});let u=M(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===t.id:!1),f=xe(l),m=M(()=>({disabled:t.disabled,get textValue(){return f()},domRef:l}));ne(()=>e.registerItem(t.id,m)),ae(()=>e.unregisterItem(t.id)),oe(()=>{e.menuState.value===0&&u.value&&e.activationTrigger.value!==0&&S(()=>{var a,g;return(g=(a=h(l))==null?void 0:a.scrollIntoView)==null?void 0:g.call(a,{block:"nearest"})})});function d(a){if(t.disabled)return a.preventDefault();e.closeMenu(),H(h(e.buttonRef))}function n(){if(t.disabled)return e.goToItem(y.Nothing);e.goToItem(y.Specific,t.id)}let v=be();function i(a){v.update(a)}function c(a){v.wasMoved(a)&&(t.disabled||u.value||e.goToItem(y.Specific,t.id,0))}function s(a){v.wasMoved(a)&&(t.disabled||u.value&&e.goToItem(y.Nothing))}return()=>{let{disabled:a}=t,g={active:u.value,disabled:a,close:e.closeMenu},{id:D,...W}=t;return T({ourProps:{id:D,ref:l,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,disabled:void 0,onClick:d,onFocus:n,onPointerenter:i,onMouseenter:i,onPointermove:c,onMousemove:c,onPointerleave:s,onMouseleave:s},theirProps:{...r,...W},slot:g,attrs:r,slots:o,name:"MenuItem"})}}});const Re={name:"Dropdown",props:{button:{type:Object,default:null},options:{type:Array,default:()=>[]},placement:{type:String,default:"left"}},components:{Menu:we,MenuButton:Se,MenuItems:De,MenuItem:Pe,Button:ie,FeatherIcon:ce,Popover:de},methods:{normalizeDropdownItem(t){let o=t.onClick||null;return!o&&t.route&&this.$router&&(o=()=>this.$router.push(t.route)),{label:t.label,icon:t.icon,group:t.group,component:t.component,onClick:o}},filterOptions(t){return(t||[]).filter(Boolean).filter(o=>o.condition?o.condition():!0).map(o=>this.normalizeDropdownItem(o))}},computed:{groups(){return(this.options[0]?.group?this.options:[{group:"",items:this.options}]).map((o,r)=>({key:r,group:o.group,hideLabel:o.hideLabel||!1,items:this.filterOptions(o.items)}))},dropdownTransition(){return{enterActiveClass:"transition duration-100 ease-out",enterFromClass:"transform scale-95 opacity-0",enterToClass:"transform scale-100 opacity-100",leaveActiveClass:"transition duration-75 ease-in",leaveFromClass:"transform scale-100 opacity-100",leaveToClass:"transform scale-95 opacity-0"}},popoverPlacement(){return this.placement==="left"?"bottom-start":this.placement==="right"?"bottom-end":this.placement==="center"?"bottom-center":"bottom"}}},Fe={key:0,class:"flex h-7 items-center px-2 text-sm font-medium text-gray-500"},Te=["onClick"],Ce={class:"whitespace-nowrap"};function Ae(t,o,r,p,e,l){const u=_("Button"),f=_("MenuButton"),m=_("FeatherIcon"),d=_("MenuItem"),n=_("MenuItems"),v=_("Popover"),i=_("Menu");return I(),w(i,{as:"div",class:"relative inline-block text-left"},{default:k(({open:c})=>[A(v,{transition:l.dropdownTransition,show:c,placement:l.popoverPlacement},{target:k(()=>[A(f,{as:"div"},{default:k(()=>[t.$slots.default?pe(t.$slots,"default",me(N({key:0},{open:c}))):(I(),w(u,N({key:1,active:c},r.button),{default:k(()=>[ve(B(r.button?r.button?.label||null:"Options"),1)]),_:2},1040,["active"]))]),_:2},1024)]),body:k(()=>[A(n,{class:L(["mt-2 min-w-40 divide-y divide-gray-100 rounded-lg bg-white shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",{"left-0 origin-top-left":r.placement=="left","right-0 origin-top-right":r.placement=="right","inset-x-0 origin-top":r.placement=="center"}])},{default:k(()=>[(I(!0),P(V,null,j(l.groups,s=>(I(),P("div",{key:s.key,class:"p-1.5"},[s.group&&!s.hideLabel?(I(),P("div",Fe,B(s.group),1)):K("",!0),(I(!0),P(V,null,j(s.items,a=>(I(),w(d,{key:a.label},{default:k(({active:g})=>[a.component?(I(),w(q(a.component),{key:0,active:g},null,8,["active"])):(I(),P("button",{key:1,class:L([g?"bg-gray-100":"text-gray-800","group flex h-7 w-full items-center rounded px-2 text-base"]),onClick:a.onClick},[a.icon&&typeof a.icon=="string"?(I(),w(m,{key:0,name:a.icon,class:"mr-2 h-4 w-4 flex-shrink-0 text-gray-700","aria-hidden":"true"},null,8,["name"])):a.icon?(I(),w(q(a.icon),{key:1,class:"mr-2 h-4 w-4 flex-shrink-0 text-gray-700"})):K("",!0),fe("span",Ce,B(a.label),1)],10,Te))]),_:2},1024))),128))]))),128))]),_:1},8,["class"])]),_:2},1032,["transition","show","placement"])]),_:3})}const $e=se(Re,[["render",Ae]]);export{$e as D};
