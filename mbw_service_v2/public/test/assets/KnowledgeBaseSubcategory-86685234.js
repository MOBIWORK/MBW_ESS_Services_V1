import{q as x,x as d,ak as I,an as g,o as D,b as S,j as o,w as s,y as e,a as u,i as m,l as f,t as b,ai as k,af as v,E as A,D as N,M as $,a1 as T,G as B}from"./index-aea319af.js";import{c as R}from"./notification-c4068361.js";import{u as L}from"./error-bdedfa48.js";import{I as M}from"./file-text-473f37ee.js";import{_ as q}from"./plus-d3fdba1e.js";import{_ as G}from"./LV.vue_vue_type_script_setup_true_lang-2ffe76d5.js";import"./iconify-d47d89f2.js";import{_ as H}from"./KnowledgeBaseCategoryHeader.vue_vue_type_script_setup_true_lang-60546e12.js";import{_ as U}from"./EmptyMessage.vue_vue_type_script_setup_true_lang-fbb9efd4.js";import{I as K}from"./edit-3-6d00b9b6.js";import"./label-bdf4c41a.js";import"./use-tree-walker-388abf0b.js";import"./use-controllable-f6b0426f.js";const O={class:"flex grow flex-col"},P={class:"space-x-2"},j={class:"flex items-center gap-2"},F={class:"space-y-4"},le=x({__name:"KnowledgeBaseSubcategory",props:{subCategoryId:{type:String,required:!0}},setup(w){const p=w,h=$(),y=T(),l=d(""),i=d(""),n=d(!1),r=I({doctype:"HD Article Category",name:p.subCategoryId,auto:!0,setValue:{onError:L({title:"Error creating sub category"})}}),_=B(()=>r.setValue.submit({category_name:l.value||r.doc.category_name,description:i.value||r.doc.description}),500),C=R({doctype:"HD Article",filters:{category:p.subCategoryId},auto:!0,transform:c=>{for(const t of c)t.onClick={name:g,params:{articleId:t.name}};return c}}),V=[{label:"Title",key:"title",width:"w-96"},{label:"Views",key:"views",width:"w-12"},{label:"Status",key:"status",width:"w-40"}];function E(){h.push({name:g,params:{articleId:"new"},query:{category:y.params.categoryId,subCategory:y.params.subCategoryId}})}return(c,t)=>(D(),S("div",O,[o(H,{title:e(r).doc?.category_name,description:e(r).doc?.description},{right:s(()=>[u("div",P,[o(e(m),{label:"Edit",theme:"gray",variant:"outline",onClick:t[0]||(t[0]=a=>n.value=!n.value)},{prefix:s(()=>[o(e(K),{class:"h-4 w-4"})]),_:1}),o(e(m),{label:"Add new",theme:"gray",variant:"solid",onClick:E},{prefix:s(()=>[o(e(q),{class:"h-4 w-4"})]),_:1})])]),_:1},8,["title","description"]),o(e(G),{columns:V,resource:e(C),doctype:"HD Article"},{title:s(({data:a})=>[u("div",j,[o(e(M),{class:"h-4 w-4"}),f(" "+b(a.title),1)])]),status:s(({data:a})=>[o(e(k),{theme:a.status==="Published"?"green":"orange",variant:"subtle"},{default:s(()=>[f(b(a.status),1)]),_:2},1032,["theme"])]),emptyMessage:s(()=>[o(U,{message:"This sub category is empty"})]),_:1},8,["resource"]),o(e(N),{modelValue:n.value,"onUpdate:modelValue":t[4]||(t[4]=a=>n.value=a),options:{title:"Edit"}},{"body-content":s(()=>[u("form",{onSubmit:t[3]||(t[3]=A((...a)=>e(_)&&e(_)(...a),["prevent"]))},[u("div",F,[o(e(v),{modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=a=>l.value=a),placeholder:e(r).doc.category_name,label:"Name",type:"text"},null,8,["modelValue","placeholder"]),o(e(v),{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=a=>i.value=a),placeholder:e(r).doc.description,label:"Description",type:"textarea"},null,8,["modelValue","placeholder"]),o(e(m),{disabled:!l.value&&!i.value,class:"w-full",label:"Save",theme:"gray",variant:"solid"},null,8,["disabled"])])],32)]),_:1},8,["modelValue"])]))}});export{le as default};
