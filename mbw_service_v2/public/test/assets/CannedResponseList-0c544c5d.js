import{_ as C}from"./plus-d3fdba1e.js";import{_ as v,D as R,I as T,aq as V,ap as b,x as g,o as f,b as h,j as s,w as a,a as m,l as M,h as r,q as A,ay as y,ad as N,y as _}from"./index-aea319af.js";import{c as B}from"./notification-c4068361.js";import{_ as D}from"./PageTitle.vue_vue_type_script_setup_true_lang-98ef5881.js";import{_ as H}from"./LV.vue_vue_type_script_setup_true_lang-2ffe76d5.js";import"./iconify-d47d89f2.js";import{_ as I}from"./TextEditor.vue_vue_type_script_setup_true_lang-eedae8e3.js";import{T as k,a as S}from"./TextEditor-107feeaf.js";import"./error-bdedfa48.js";import"./EmptyMessage.vue_vue_type_script_setup_true_lang-fbb9efd4.js";import"./label-bdf4c41a.js";import"./use-tree-walker-388abf0b.js";import"./use-controllable-f6b0426f.js";import"./UserAvatar.vue_vue_type_script_setup_true_lang-254c9b2b.js";import"./Avatar.vue_vue_type_script_setup_true_lang-827ced2f.js";const L={name:"AddNewCannedResponsesDialog",props:["show"],components:{Dialog:R,Input:T,FeatherIcon:V,ErrorMessage:b,TextEditor:k,TextEditorFixedMenu:S},setup(){const e=g(""),t=g("");return{titleValidationError:e,messageValidationError:t}},data(){return{title:"",message:""}},watch:{title(e){this.validateTitle(e)},message(e){this.validateMessage(e)}},computed:{textEditorMenuButtons(){return["Paragraph",["Heading 2","Heading 3","Heading 4","Heading 5","Heading 6"],"Separator","Bold","Italic","Separator","Bullet List","Numbered List","Separator","Align Left","Align Center","Align Right","Separator","Image","Video","Link","Blockquote","Code","Horizontal Rule",["InsertTable","AddColumnBefore","AddColumnAfter","DeleteColumn","AddRowBefore","AddRowAfter","DeleteRow","MergeCells","SplitCell","ToggleHeaderColumn","ToggleHeaderRow","ToggleHeaderCell","DeleteTable"],"Separator","Undo","Redo"]}},methods:{close(){this.title="",this.message="",this.$emit("close")},addResponse(){if(this.validateInputs())return;const e={title:this.title,message:this.message};this.$resources.newResponse.submit({doc:{doctype:"HD Canned Response",...e}})},validateInputs(){let e=this.validateTitle(this.title);return e+=this.validateMessage(this.message),e},validateTitle(e){return this.titleValidationError="",e?e.trim()==""&&(this.titleValidationError="Title is required"):this.titleValidationError="Title is required",this.titleValidationError},validateMessage(e){return this.messageValidationError="",e?["<p><br></p>","<p></p>"].includes(e.replaceAll(" ",""))&&(this.messageValidationError="Message is required"):this.messageValidationError="Message is required",this.messageValidationError}},resources:{newResponse(){return{url:"frappe.client.insert",onSuccess:e=>{this.$router.push(`/settings/canned_responses/${e.name}`)},onError:e=>{this.$toast({title:"Error while creating canned response",text:e,icon:"x",iconClasses:"text-red-500"})}}}}},$={class:"flex flex-col mt-6"},q=m("div",{class:"mb-2 block text-sm leading-4 text-gray-700 mt-4"}," Message ",-1);function P(e,t,p,l,n,o){const u=r("Input"),d=r("ErrorMessage"),c=r("TextEditorFixedMenu"),w=I,x=r("Button"),E=r("Dialog");return f(),h("div",null,[s(E,{options:{title:"New canned response",size:"3xl"},show:p.show,onClose:t[3]||(t[3]=i=>o.close()),class:"bg-white px-6 py-5 pb-1 pt-6"},{"body-content":a(()=>[m("div",$,[s(u,{id:"searchInput",class:"w-full",type:"text",label:"Title",placeholder:"Enter Title",modelValue:n.title,"onUpdate:modelValue":t[0]||(t[0]=i=>n.title=i)},null,8,["modelValue"]),s(d,{message:l.titleValidationError},null,8,["message"])]),q,m("div",null,[s(w,{class:"bg-gray-100",ref:"textEditor","editor-class":"min-h-[20rem] overflow-y-auto max-h-[73vh] w-full px-3 max-w-full",content:n.message,"starterkit-options":{heading:{levels:[2,3,4,5,6]}},onChange:t[1]||(t[1]=i=>{n.message=i})},{top:a(()=>[m("div",null,[s(c,{class:"m-3 overflow-x-auto",buttons:o.textEditorMenuButtons},null,8,["buttons"])])]),_:1},8,["content"])]),s(d,{message:l.messageValidationError},null,8,["message"])]),actions:a(()=>[s(x,{appearance:"primary",onClick:t[2]||(t[2]=i=>o.addResponse()),class:"mr-auto"},{default:a(()=>[M("Add Response")]),_:1})]),_:1},8,["show"])])}const F=v(L,[["render",P]]),O={class:"flex flex-col"},ne=A({__name:"CannedResponseList",setup(e){const t=g(!1),p=[{label:"Name",key:"name",width:"w-80"},{label:"Owner",key:"owner",width:"w-96"}],l=B({doctype:"HD Canned Response",fields:["name","title","owner"],auto:!0,transform:n=>{for(const o of n)o.onClick={name:y,params:{id:o.name}};return n}});return N(()=>({title:"Canned responses"})),(n,o)=>{const u=C,d=r("Button");return f(),h("div",O,[s(D,{title:"Canned Responses"},{right:a(()=>[s(d,{label:"New canned response",theme:"gray",variant:"solid",onClick:o[0]||(o[0]=c=>t.value=!0)},{prefix:a(()=>[s(u,{class:"h-4 w-4"})]),_:1})]),_:1}),s(_(H),{columns:p,resource:_(l),class:"mt-2.5",doctype:"HD Canned Response"},null,8,["resource"]),s(F,{show:t.value,onClose:o[1]||(o[1]=c=>t.value=!1)},null,8,["show"])])}}});export{ne as default};
